<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>【*】Linux-常用命令大全 | Hexo</title><meta name="description" content="Linux-常用命令大全"><meta property="og:type" content="article"><meta property="og:title" content="【*】Linux-常用命令大全"><meta property="og:url" content="http://fansichao.github.com/blog/Languages/Linux/linux-using-cmd.md/index.html"><meta property="og:site_name" content="Fansichao Blog"><meta property="og:description" content="Linux-常用命令大全"><meta property="og:locale"><meta property="og:image" content="https://github.com/fansichao/file/blob/master/picture/Linux%20vi.png?raw=true"><meta property="article:published_time" content="2021-10-23T11:54:51.113Z"><meta property="article:modified_time" content="2021-10-23T11:54:51.113Z"><meta property="article:author" content="Fansichao"><meta property="article:tag" content="linux"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://github.com/fansichao/file/blob/master/picture/Linux%20vi.png?raw=true"><link rel="canonical" href="http://fansichao.github.com/blog/Languages/Linux/linux-using-cmd.md/index.html"><link rel="alternate" href="/atom.xml" title="Fansichao Blog" type="application/atom+xml"><link rel="icon" href="/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/blog/css/style.css"><link href="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.css" rel="stylesheet"><meta name="generator" content="Hexo 5.4.0"></head><body class="main-center theme-black" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="https://github.com/fansichao" target="_blank"><img class="img-circle img-rotate" src="/blog/images/avatar.jpg" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">fansichao</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">Data Engineer &amp; SSE &amp; CYO</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form"><div class="input-group"><input type="text" class="search-form-input form-control" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="search-form-submit btn btn-flat" onclick="return!1"><i class="icon icon-search"></i></button></span></div></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="Type something..." x-webkit-speech> <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav"><li class="menu-item menu-item-home"><a href="/blog/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/blog/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/blog/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/blog/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-repository"><a href="/blog/repository"><i class="icon icon-project"></i> <span class="menu-title">Repository</span></a></li><li class="menu-item menu-item-books"><a href="/blog/books"><i class="icon icon-book-fill"></i> <span class="menu-title">Books</span></a></li><li class="menu-item menu-item-links"><a href="/blog/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/blog/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/cofess" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="http://weibo.com/cofess" target="_blank" title="Weibo" data-toggle="tooltip" data-placement="top"><i class="icon icon-weibo"></i></a></li><li><a href="https://twitter.com/iwebued" target="_blank" title="Twitter" data-toggle="tooltip" data-placement="top"><i class="icon icon-twitter"></i></a></li><li><a href="https://www.behance.net/cofess" target="_blank" title="Behance" data-toggle="tooltip" data-placement="top"><i class="icon icon-behance"></i></a></li><li><a href="/blog/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>欢迎交流与分享经验!</p></div></div></div></div><div class="widget"><h3 class="widget-title">Categories</h3><div class="widget-body"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/bigdata/">bigdata</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/linux/">linux</a><span class="category-list-count">16</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/module/">module</a><span class="category-list-count">41</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/module/docker/">docker</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/module/graph/">graph</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/module/grpah/">grpah</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/module/hexo/">hexo</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/python/">python</a><span class="category-list-count">26</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/blog/categories/python/data-structure/">data-structure</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/python/python-algorithm/">python-algorithm</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/python/python-%E5%86%85%E7%BD%AE%E5%8C%85/">python-内置包</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/python/python-%E5%9F%BA%E7%A1%80/">python-基础</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/python/python-%E8%BF%9B%E9%98%B6/">python-进阶</a><span class="category-list-count">13</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/web/">web</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/xxx/">xxx</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/blog/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/">大数据</a><span class="category-list-count">2</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tags</h3><div class="widget-body"><ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Database/" rel="tag">Database</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Graph/" rel="tag">Graph</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/Neo4j/" rel="tag">Neo4j</a><span class="tag-list-count">6</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/aaa/" rel="tag">aaa</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/bigdata/" rel="tag">bigdata</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/blog/" rel="tag">blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/centos8/" rel="tag">centos8</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/data-structure/" rel="tag">data-structure</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/docker/" rel="tag">docker</a><span class="tag-list-count">11</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/graph/" rel="tag">graph</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/gremlin/" rel="tag">gremlin</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/hadoop/" rel="tag">hadoop</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/hbase/" rel="tag">hbase</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/hexo/" rel="tag">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/hugegraph/" rel="tag">hugegraph</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/index/" rel="tag">index</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/linux/" rel="tag">linux</a><span class="tag-list-count">16</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/module/" rel="tag">module</a><span class="tag-list-count">43</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/python/" rel="tag">python</a><span class="tag-list-count">26</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/python-algorithm/" rel="tag">python-algorithm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/python-%E5%86%85%E7%BD%AE%E5%8C%85/" rel="tag">python-内置包</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/python-%E5%9F%BA%E7%A1%80/" rel="tag">python-基础</a><span class="tag-list-count">7</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/python-%E8%BF%9B%E9%98%B6/" rel="tag">python-进阶</a><span class="tag-list-count">13</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/scylladb/" rel="tag">scylladb</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/shell/" rel="tag">shell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/spark/" rel="tag">spark</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/todo/" rel="tag">todo</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/web/" rel="tag">web</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" rel="tag">大数据</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" rel="tag">消息队列</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/blog/tags/%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/" rel="tag">缓存机制</a><span class="tag-list-count">1</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/blog/tags/Database/" style="font-size:13.4px">Database</a> <a href="/blog/tags/Graph/" style="font-size:13.1px">Graph</a> <a href="/blog/tags/Neo4j/" style="font-size:13.4px">Neo4j</a> <a href="/blog/tags/aaa/" style="font-size:13px">aaa</a> <a href="/blog/tags/bigdata/" style="font-size:13.3px">bigdata</a> <a href="/blog/tags/blog/" style="font-size:13px">blog</a> <a href="/blog/tags/centos8/" style="font-size:13px">centos8</a> <a href="/blog/tags/data-structure/" style="font-size:13px">data-structure</a> <a href="/blog/tags/docker/" style="font-size:13.6px">docker</a> <a href="/blog/tags/graph/" style="font-size:13px">graph</a> <a href="/blog/tags/gremlin/" style="font-size:13px">gremlin</a> <a href="/blog/tags/hadoop/" style="font-size:13px">hadoop</a> <a href="/blog/tags/hbase/" style="font-size:13px">hbase</a> <a href="/blog/tags/hexo/" style="font-size:13px">hexo</a> <a href="/blog/tags/hugegraph/" style="font-size:13.1px">hugegraph</a> <a href="/blog/tags/index/" style="font-size:13.1px">index</a> <a href="/blog/tags/linux/" style="font-size:13.8px">linux</a> <a href="/blog/tags/module/" style="font-size:14px">module</a> <a href="/blog/tags/python/" style="font-size:13.9px">python</a> <a href="/blog/tags/python-algorithm/" style="font-size:13px">python-algorithm</a> <a href="/blog/tags/python-%E5%86%85%E7%BD%AE%E5%8C%85/" style="font-size:13.3px">python-内置包</a> <a href="/blog/tags/python-%E5%9F%BA%E7%A1%80/" style="font-size:13.5px">python-基础</a> <a href="/blog/tags/python-%E8%BF%9B%E9%98%B6/" style="font-size:13.7px">python-进阶</a> <a href="/blog/tags/scylladb/" style="font-size:13px">scylladb</a> <a href="/blog/tags/shell/" style="font-size:13px">shell</a> <a href="/blog/tags/spark/" style="font-size:13px">spark</a> <a href="/blog/tags/todo/" style="font-size:13.2px">todo</a> <a href="/blog/tags/web/" style="font-size:13.3px">web</a> <a href="/blog/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/" style="font-size:13.1px">大数据</a> <a href="/blog/tags/%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/" style="font-size:13px">消息队列</a> <a href="/blog/tags/%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/" style="font-size:13px">缓存机制</a></div></div><div class="widget"><h3 class="widget-title">Archive</h3><div class="widget-body"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/blog/archives/2021/10/">October 2021</a><span class="archive-list-count">244</span></li></ul></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/blog/categories/xxx/">xxx</a></p><p class="item-title"><a href="/blog/aaa.md/" class="title">aaa</a></p><p class="item-date"><time datetime="2021-10-24T03:43:28.000Z" itemprop="datePublished">2021-10-24</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/blog/resources.md/" class="title">(no title)</a></p><p class="item-date"><time datetime="2021-10-23T11:54:51.339Z" itemprop="datePublished">2021-10-23</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/blog/Tools/ml/google-course/readme.md/" class="title">Google 机器学习速成课程</a></p><p class="item-date"><time datetime="2021-10-23T11:54:51.339Z" itemprop="datePublished">2021-10-23</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/blog/Tools/ml/google-course/03%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E5%B7%A5%E7%A8%8B.md/" class="title">(no title)</a></p><p class="item-date"><time datetime="2021-10-23T11:54:51.288Z" itemprop="datePublished">2021-10-23</time></p></div></li><li><div class="item-inner"><p class="item-category"></p><p class="item-title"><a href="/blog/Tools/ml/google-course/04%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%B3%BB%E7%BB%9F%E5%9C%A8%E7%8E%B0%E5%AE%9E%E4%B8%96%E7%95%8C%E9%87%8C%E7%9A%84%E5%BA%94%E7%94%A8.md/" class="title">(no title)</a></p><p class="item-date"><time datetime="2021-10-23T11:54:51.288Z" itemprop="datePublished">2021-10-23</time></p></div></li></ul></div></div></div></aside><main class="main" role="main"><div class="content"><article id="post-Languages/Linux/linux-using-cmd" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">【*】Linux-常用命令大全</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/blog/Languages/Linux/linux-using-cmd.md/" class="article-date"><time datetime="2021-10-23T11:54:51.113Z" itemprop="datePublished">2021-10-23</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/blog/categories/linux/">linux</a> </span><span class="article-tag"><i class="icon icon-tags"></i> <a class="article-tag-link-link" href="/blog/tags/linux/" rel="tag">linux</a> </span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/blog/Languages/Linux/linux-using-cmd.md/#comments" class="article-comment-link">Comments</a></span></div></div><div class="article-entry marked-body" itemprop="articleBody"><h2 id="NeedTODO"><a href="#NeedTODO" class="headerlink" title="NeedTODO"></a>NeedTODO</h2><p><a target="_blank" rel="noopener" href="https://flashtext.readthedocs.io/en/latest/">数据清洗 -大规模数据清洗的利器 文字解析、文字替换等， 速度远快于 replace</a></p><h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><h3 id="rsync"><a href="#rsync" class="headerlink" title="rsync"></a>rsync</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 目录同步</span></span><br><span class="line">rsync -avzP es@<span class="built_in">local</span>:/ssd_data /esdata2/</span><br></pre></td></tr></table></figure><h3 id="split"><a href="#split" class="headerlink" title="split"></a>split</h3><p>split 文件切割软件</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按照大小切割文件</span></span><br><span class="line">split -b 10M a.csv  a.csv.</span><br><span class="line">切割后得到</span><br><span class="line">a.csv.aa a.csv.ab</span><br><span class="line"></span><br><span class="line"><span class="comment"># 字符串分割函数split</span></span><br><span class="line"><span class="built_in">str</span>.split(<span class="built_in">str</span>=<span class="string">&quot;&quot;</span>, num=string.count(<span class="built_in">str</span>))</span><br><span class="line">- <span class="built_in">str</span> :分隔符，默认为空格。</span><br><span class="line">- num :分割次数。</span><br></pre></td></tr></table></figure><h3 id="ls-文件长度统计"><a href="#ls-文件长度统计" class="headerlink" title="ls 文件长度统计"></a>ls 文件长度统计</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 统计当前文件夹下文件的个数:</span></span><br><span class="line">ls -l |grep <span class="string">&quot;^-&quot;</span>|wc -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计当前文件夹下目录的个数:</span></span><br><span class="line">ls -l |grep <span class="string">&quot;^d&quot;</span>|wc -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计当前文件夹下文件的个数，包括子文件夹里的 :</span></span><br><span class="line">ls -lR|grep <span class="string">&quot;^-&quot;</span>|wc -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计文件夹下目录的个数，包括子文件夹里的:</span></span><br><span class="line">ls -lR|grep <span class="string">&quot;^d&quot;</span>|wc -l</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计输出信息的行数</span></span><br><span class="line">wc -l</span><br></pre></td></tr></table></figure><h3 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h3><p>sed 文件替换</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在文件的首行插入指定内容：</span></span><br><span class="line">sed -i <span class="string">&quot;1i#! /bin/sh -&quot;</span> a</span><br><span class="line">执行后，在a文件的第一行插入<span class="comment">#! /bin/sh -</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在文件的指定行(n)插入指定内容：</span></span><br><span class="line">sed -i <span class="string">&quot;niecho &quot;</span>haha<span class="string">&quot;&quot;</span> a</span><br><span class="line">执行后，在a文件的第n行插入<span class="built_in">echo</span> <span class="string">&quot;haha&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 在文件的末尾行插入指定内容：</span></span><br><span class="line"><span class="built_in">echo</span> “haha” &gt;&gt; a</span><br><span class="line">执行后，在a文件的末尾行插入haha</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除正文首行的#号注释</span></span><br><span class="line">sed <span class="string">&#x27;s/\#//g&#x27;</span> /etc/crontab</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换文件中字符串</span></span><br><span class="line">sed -i <span class="string">&quot;s/str1/str2/g&quot;</span> filname</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除a.txt中含&quot;abc&quot;的行，但不改变a.txt文件本身，操作之后的结果在终端显示</span></span><br><span class="line">sed -e <span class="string">&#x27;/abc/d&#x27;</span>  a.txt  </span><br><span class="line"><span class="comment"># 删除a.txt中含&quot;abc&quot;的行，将操作之后的结果保存到a.log</span></span><br><span class="line">sed -e <span class="string">&#x27;/abc/d&#x27;</span>  a.txt  &gt; a.log</span><br><span class="line"><span class="comment"># 删除含字符串&quot;abc&quot;或“efg&quot;的行，将结果保存到a.log</span></span><br><span class="line">sed <span class="string">&#x27;/abc/d;/efg/d&#x27;</span> a.txt &gt; a.log</span><br><span class="line"><span class="comment"># 查找多个空格</span></span><br><span class="line">/\s\+</span><br><span class="line"><span class="comment"># 删除第1000行输出  a不变 b删除一条数据</span></span><br><span class="line">sed -e <span class="string">&#x27;/1000/d&#x27;</span>  a&gt; b</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取第二行到末尾</span></span><br><span class="line">sed -n <span class="string">&#x27;2,$p&#x27;</span>  filename &gt; new_filename</span><br><span class="line"><span class="comment"># 删除Linux文件重复行</span></span><br><span class="line">sort -n filename | uniq</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除空行 删除空格/回车组成的空行</span></span><br><span class="line">sed -i <span class="string">&#x27;/^ *$/d&#x27;</span> file</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将目录下所有文件 替换字符串</span></span><br><span class="line">sed -i <span class="string">&quot;s/d3b387c031dd/1000db7324ff/g&quot;</span> `grep <span class="string">&quot;d3b387c031dd&quot;</span> -rl /u01 `</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换目录下所有文件 sed和grep搭配使用</span></span><br><span class="line">sed -i <span class="string">&#x27;s/ id=&quot;content-main&quot;//g&#x27;</span>   ` grep -rl  <span class="string">&#x27;content-main&#x27;</span> `</span><br></pre></td></tr></table></figure><h3 id="rpm"><a href="#rpm" class="headerlink" title="rpm"></a>rpm</h3><p><strong>资源链接:</strong></p><ul><li>rpm 镜像网：<a target="_blank" rel="noopener" href="http://rpmfind.net/">http://rpmfind.net/</a></li></ul><p>rpm 相关命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询包版本</span></span><br><span class="line">rpm -qa | grep vim</span><br><span class="line"><span class="comment"># 安装包</span></span><br><span class="line">rpm -ivh xxxxx.rpm</span><br><span class="line"><span class="comment"># 卸载</span></span><br><span class="line">rpm -e --nodeps vim-minimal-7.4.629-5.el6_8.1.x86_64</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h3><p>yum 相关命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装</span></span><br><span class="line">yum install  -y vim</span><br><span class="line"><span class="comment"># 卸载</span></span><br><span class="line">yum remove vim</span><br><span class="line"><span class="comment"># 重置缓存</span></span><br><span class="line">yum clean all</span><br><span class="line">yum makecache</span><br><span class="line"><span class="comment">#  yum配置目录</span></span><br><span class="line"> /etc/yum.repos.d/xx.repo</span><br><span class="line"> <span class="comment"># 只下载安装包 方法1</span></span><br><span class="line">yum install yum-plugin-downloadonly -y <span class="comment"># centos6之前需要此命令</span></span><br><span class="line">yum install mysql-server --downloadonly --downloaddir=/data/packages</span><br><span class="line"><span class="comment"># 只下载安装包 方法2</span></span><br><span class="line">yum install yum-utils -y <span class="comment"># 专门的下载工具</span></span><br><span class="line">yum downloader lsof --resolve --destdir=/data/mydepot/ <span class="comment"># 默认不会下载对应的依赖文件，需要添加 resolve参数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看可用的rpm包</span></span><br><span class="line">yum list available <span class="string">&#x27;graphviz*&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># yum 下载 rpm 包</span></span><br><span class="line">yum install --downloaddir=/tmp/whj/ --downloadonly glibc-devel.i686</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1. 获取镜像源： 例如 CentOS-6.6-x4_64-bin-DVD1.iso</span><br><span class="line">2. 清理yum文件： yum clean all</span><br><span class="line">3. 缓存yum文件： yum makecache</span><br><span class="line">4. 挂载镜像： monut -t iso9660 -o loop CentOS-6.6-x4_64-bin-DVD1.iso /iso_mnt  <span class="comment"># mount挂载的源不同对应的目录不同</span></span><br><span class="line">5. 修改配置文件：/etc/yum.repos.d/xxx.repo <span class="comment"># 例如 file.repo</span></span><br><span class="line">[file]</span><br><span class="line">baseurl=file:///iso_mnt/ <span class="comment"># 对应目录位置 修改</span></span><br><span class="line">gpgcheck=1</span><br><span class="line">enabled=1</span><br><span class="line">gpgkey=file:///iso_mnt/RPM-GPG-KEY-CentOS-6  <span class="comment"># 对应目录位置 修改</span></span><br><span class="line">6.清理yum文件&amp;缓存yum文件：yum clean all  &amp;&amp; yum makecache</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="date"><a href="#date" class="headerlink" title="date"></a>date</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">Bash命令定义时间变量</span><br><span class="line"></span><br><span class="line">LOG_TIME=`date +%H:%M:%S`</span><br><span class="line"></span><br><span class="line">获取前天日期：`date -d -2day +%Y%m%d`</span><br><span class="line">依次类推比如获取10天前的日期：`date -d -10day +%Y%m%d`</span><br><span class="line">或n天前的 `date -d <span class="string">&quot;n days ago&quot;</span> +%y%m%d`</span><br><span class="line">明天：`date -d tomorrow +%y%m%d`</span><br><span class="line">注意以上中间有空格</span><br><span class="line"></span><br><span class="line">至于你需要什么样的日期时间格式，就需要应用相关的时间域参数来实现咯</span><br><span class="line">相关时间域如下：</span><br><span class="line">% H 小时(00..23)</span><br><span class="line">% I 小时(01..12)</span><br><span class="line">% k 小时(0..23)</span><br><span class="line">% l 小时(1..12)</span><br><span class="line">% M 分(00..59)</span><br><span class="line">% p 显示出AM或PM</span><br><span class="line">% r 时间(hh：mm：ss AM或PM)，12小时</span><br><span class="line">% s 从1970年1月1日00：00：00到目前经历的秒数</span><br><span class="line">% S 秒(00..59)</span><br><span class="line">% T 时间(24小时制)(hh:mm:ss)</span><br><span class="line">% X 显示时间的格式(％H:％M:％S)</span><br><span class="line">% Z 时区 日期域</span><br><span class="line">% a 星期几的简称( Sun..Sat)</span><br><span class="line">% A 星期几的全称( Sunday..Saturday)</span><br><span class="line">% b 月的简称(Jan..Dec)</span><br><span class="line">% B 月的全称(January..December)</span><br><span class="line">% c 日期和时间( Mon Nov 8 14：12：46 CST 1999)</span><br><span class="line">% d 一个月的第几天(01..31)</span><br><span class="line">% D 日期(mm／dd／yy)</span><br><span class="line">% h 和%b选项相同</span><br><span class="line">% j 一年的第几天(001..366)</span><br><span class="line">% m 月(01..12)</span><br><span class="line">% w 一个星期的第几天(0代表星期天)</span><br><span class="line">% W 一年的第几个星期(00..53，星期一为第一天)</span><br><span class="line">% x 显示日期的格式(mm/dd/yy)</span><br><span class="line">% y 年的最后两个数字( 1999则是99)</span><br><span class="line">% Y 年(例如：1970，1996等)</span><br></pre></td></tr></table></figure><h3 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h3><p>pip 相关常用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 搜索包</span></span><br><span class="line">pip search xlrd</span><br><span class="line"><span class="comment"># 查看包版本</span></span><br><span class="line">pip list</span><br><span class="line"><span class="comment"># 生成环境依赖文件</span></span><br><span class="line">pip freeze &gt; requirement.txt</span><br><span class="line"><span class="comment"># 下载安装包 方式1</span></span><br><span class="line">pip --downloadonly --downloaddir=/tmp/  xlrd</span><br><span class="line"><span class="comment"># 下载安装包 方式2 - 会下载对应依赖</span></span><br><span class="line">pip download xx</span><br><span class="line"><span class="comment"># 查看可更新包：</span></span><br><span class="line">pip list  --outdated --format=columns</span><br><span class="line"><span class="comment"># 批量下载并更新：</span></span><br><span class="line">pip install pip-review</span><br><span class="line">pip-review --<span class="built_in">local</span> --interactive</span><br><span class="line"><span class="comment"># 寻找pip中是否存在此安装包</span></span><br><span class="line">pip search file</span><br><span class="line"><span class="comment"># 查看安装包时安装了哪些文件：</span></span><br><span class="line">pip show --files SomePackage</span><br><span class="line"><span class="comment"># 查看哪些包有更新：</span></span><br><span class="line">pip show --files SomePackage</span><br><span class="line"><span class="comment"># 更新一个软件：</span></span><br><span class="line">pip install --upgrade SomePackage</span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">pip install xlrd</span><br><span class="line"><span class="comment"># 卸载</span></span><br><span class="line">pip uninstall xlrd</span><br></pre></td></tr></table></figure><p>配置国内 pip 源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 配置 国内pip源   ~/.pip/pip.conf</span></span><br><span class="line">[global]</span><br><span class="line">index-url = http://mirrors.aliyun.com/pypi/simple/</span><br><span class="line">[install]</span><br><span class="line">trusted-host=mirrors.aliyun.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#豆瓣：https://pypi.douban.com/simple</span></span><br><span class="line"><span class="comment">#中国科学技术大学：https://mirrors.ustc.edu.cn/pypi/web/simple/</span></span><br><span class="line"><span class="comment">#清华大学TUNA：https://pypi.tuna.tsinghua.edu.cn/simple</span></span><br><span class="line"><span class="comment">#https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple/</span></span><br></pre></td></tr></table></figure><p>其他命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pip安装包 --no-index 不使用requirement.txt的顺序</span></span><br><span class="line">pip install -r /data/xcdw_pacakages/requirement_rqma.txt --find-link=/data/xcdw_pacakages/packages_sgq--no-index</span><br><span class="line"><span class="comment"># 使用豆瓣源下载</span></span><br><span class="line">pip instal Pillow -i http://pypi.douban.com/simple --trusted-host pypi.douban.com</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 该命令可以跳过安装错误的库，继续安装</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> requirement; <span class="keyword">do</span> pip2 install <span class="variable">$requirement</span>; <span class="keyword">done</span> &lt; requirements.txt</span><br></pre></td></tr></table></figure><h3 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 压缩常用命令</span></span><br><span class="line">tar -zcf xxx.tar.gz xxx_dir_xxx</span><br><span class="line"></span><br><span class="line">-v 显示详细的处理文件</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压常用命令</span></span><br><span class="line">tar -zxvf xxx.tar.gz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 解压 xz 压缩包</span></span><br><span class="line">tar xvJf  node-v6.10.1-linux-x64.tar.xz</span><br></pre></td></tr></table></figure><h3 id="zip-unzip"><a href="#zip-unzip" class="headerlink" title="zip/unzip"></a>zip/unzip</h3><p>zip -P qwe123 a.zip -r ssss</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># zip 参数说明</span></span><br><span class="line"></span><br><span class="line">-P 加密</span><br><span class="line">-r 压缩目录</span><br><span class="line"></span><br><span class="line"><span class="comment"># 压缩并指定目录</span></span><br><span class="line">zip -r /home/kms/kms.zip /home/kms/server/kms</span><br><span class="line"><span class="comment"># 解压并指定目录</span></span><br><span class="line">unzip /home/kms/kms.zip -d /home/kms/server/kms</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ~/.bash_profile</span></span><br><span class="line"><span class="built_in">alias</span> pip=<span class="string">&quot; pip --trusted-host mirrors.aliyun.com &quot;</span></span><br></pre></td></tr></table></figure><h3 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h3><p>wget 参数解释、用法: <a target="_blank" rel="noopener" href="https://blog.csdn.net/endall/article/details/1571220">https://blog.csdn.net/endall/article/details/1571220</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 做站点镜像</span></span><br><span class="line">wget xxxx -r -np  下载整个目录，不包含上层目录</span><br></pre></td></tr></table></figure><h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><p>grep -r 递归查询子目录<br>grep -i 查询不区分大小写<br>grep -n 显示查询出来的文件行号<br>grep -w 精准匹配<br>grep -l 只显示(包含文件内容的)文件名</p><p>grep -rn xxx . “.” 只查询本目录以及其下的目录—公司电脑只有这样才能查询，具体原因，可能是设置了相关权限等</p><h3 id="find"><a href="#find" class="headerlink" title="find"></a>find</h3><p>忽略大小写 -iname<br>find / -iname ‘<em>csv</em>‘</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查找500M以上的文件</span></span><br><span class="line">sudo find / -size +500M /swap.img</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找整整500M的文件</span></span><br><span class="line">sudo find / -size 500M</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找小于500M的文件</span></span><br><span class="line">sudo find / -size -500M</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查找大于100M且小于500M的文件</span></span><br><span class="line">sudo find / -size -500M -size +100M</span><br><span class="line"></span><br><span class="line">其他查找单位</span><br><span class="line">- b 512-byte blocks (this is the default <span class="keyword">if</span> no suffix is used)</span><br><span class="line">- c bytes</span><br><span class="line">- w two-byte words</span><br><span class="line">- k Kilobytes</span><br><span class="line">- M Megabytes</span><br><span class="line">- G Gigabytes</span><br></pre></td></tr></table></figure><h3 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h3><h4 id="vim-键盘图"><a href="#vim-键盘图" class="headerlink" title="vim 键盘图"></a>vim 键盘图</h4><p><img src="https://github.com/fansichao/file/blob/master/picture/Linux%20vi.png?raw=true" alt="Linux-VIm"></p><h4 id="vim-使用技巧"><a href="#vim-使用技巧" class="headerlink" title="vim 使用技巧"></a>vim 使用技巧</h4><p>vim 使用技巧</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 全局替换</span></span><br><span class="line">%s/old/new/g</span><br><span class="line"><span class="comment"># 指定行数替换</span></span><br><span class="line">100,120/old/new/g</span><br><span class="line"><span class="comment"># 文字字符</span></span><br><span class="line">\ 格式化字符，</span><br><span class="line">\r 换行符</span><br><span class="line">/g 全局替换</span><br><span class="line">%s 全局查找</span><br><span class="line">\+ 表重复一次或多次  x+  </span><br><span class="line">/c 确认替换</span><br><span class="line"><span class="comment"># 删除文章中的空行</span></span><br><span class="line">g/^s*$/d</span><br><span class="line">^s*$ ：匹配空行，其中^表示行首，s表示空字符，包括空格和制表符，*重复0到n个前面的字符，$表示行尾。连起来就是匹配只有空字符的行，也就是空行。</span><br><span class="line">/d ：删除该行</span><br><span class="line"><span class="comment"># 删除行尾空格：</span></span><br><span class="line">:%s= *$==</span><br><span class="line">%s全局查找替换</span><br><span class="line">=为%s命令的分隔符，如果把=换为/，则该命令可以写为:%s/ *$//</span><br><span class="line">” *$”, $表示行尾，*匹配前面0个到n个字符，*前面是空格，因此此正则表达式匹配行尾的0个到n个字符。</span><br><span class="line">==，分隔符没有中间没有内容，表示删除匹配空格, 在这里表示删除行尾空格。</span><br><span class="line"><span class="comment"># 去掉文件中^M</span></span><br><span class="line">^M = Ctrl v + Ctrl m</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除换行符：</span></span><br><span class="line">:%s/\n//g</span><br><span class="line"><span class="comment"># 将连续的两个空行替换成一个空行：</span></span><br><span class="line">:%s/\n\n/\r/g</span><br><span class="line"><span class="comment"># 删除三行空行：</span></span><br><span class="line">:%s/^\n\&#123;3&#125;//</span><br><span class="line"></span><br><span class="line"><span class="comment"># 合并行</span></span><br><span class="line">命令J使两行合并为一行，同时用空格分隔这两行。</span><br><span class="line"><span class="comment"># 替换str为str+回车</span></span><br><span class="line">回车在vim的输入方法是ctrl+V,会得到^,此时再按回车.会得到^M这个就是回车了</span><br><span class="line">因此把全文件所有str换成str回车的语句是:</span><br><span class="line">: 1,$ s/str/str^M/g</span><br><span class="line">^M用上面的方法输入</span><br><span class="line">1,$表示从1到最后一行,s是switch,g是global</span><br><span class="line"></span><br><span class="line"><span class="comment">### vim删除包含指定字符串的所有行</span></span><br><span class="line">:g/something/d   <span class="comment"># 删除包含something的所有行</span></span><br></pre></td></tr></table></figure><h4 id="vimrc-配置"><a href="#vimrc-配置" class="headerlink" title=".vimrc 配置"></a>.vimrc 配置</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> nu</span><br><span class="line"><span class="built_in">set</span> ts=4     <span class="comment"># 设置 长度为四个空格</span></span><br><span class="line"><span class="built_in">set</span> expandtab <span class="comment"># tab键设置为空格</span></span><br><span class="line"><span class="built_in">set</span> paste <span class="comment"># 智能粘贴</span></span><br><span class="line"><span class="built_in">set</span> shiftwidth <span class="comment"># 程序自动缩进</span></span><br><span class="line"><span class="built_in">set</span> softtabstop=4/8/16 <span class="comment"># tab键为四个空格或者制表符，8为制表符，4为空格，可以同时产生制表符和空格</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="vim-set"><a href="#vim-set" class="headerlink" title="vim-set"></a>vim-set</h4><p>Vim 中的一些设置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">:<span class="built_in">set</span> fileformat 设置文件格式</span><br><span class="line">:<span class="built_in">set</span> endofline 设置文件结束符</span><br><span class="line">:<span class="built_in">set</span> noendofline 取消文件结束符</span><br><span class="line"></span><br><span class="line">:%s/\n//g 删除换行符</span><br><span class="line">:<span class="built_in">set</span> textwidth 设置行宽</span><br><span class="line">:<span class="built_in">set</span> textwidth 设置行边距</span><br><span class="line">:join 合并多行J合并两行</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="模块命令"><a href="#模块命令" class="headerlink" title="模块命令"></a>模块命令</h2><h3 id="端口相关"><a href="#端口相关" class="headerlink" title="端口相关"></a>端口相关</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">一、查看哪些端口被打开  netstat -anp</span><br><span class="line">二、关闭端口号:iptables -A INPUT -p tcp --drop 端口号-j DROP</span><br><span class="line">  iptables -A OUTPUT -p tcp --dport 端口号-j DROP</span><br><span class="line">三、打开端口号：iptables -A INPUT -ptcp --dport  端口号-j ACCEPT</span><br><span class="line">四、以下是linux打开端口命令的使用方法。</span><br><span class="line">  nc -lp 23 &amp;(打开23端口，即telnet)</span><br><span class="line">  netstat -an | grep 23 (查看是否打开23端口)</span><br><span class="line">五、linux打开端口命令每一个打开的端口，都需要有相应的监听程序才可以</span><br><span class="line"></span><br><span class="line">db2 top，查看db2进程</span><br></pre></td></tr></table></figure><h3 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">文件默认权限 <span class="built_in">umask</span></span><br><span class="line">文件隐藏属性 chattr lsatrr</span><br><span class="line"><span class="built_in">which</span> 查找path下的命令</span><br><span class="line">whereis查找文件 读取数据库。</span><br><span class="line">locate查找文件 快于find 读取数据库，但是存在更新慢导致无法查询的情况。</span><br><span class="line">文件特殊权限 suid sgid sbit</span><br><span class="line">nc -tl 8000</span><br></pre></td></tr></table></figure><h3 id="自启动"><a href="#自启动" class="headerlink" title="自启动"></a>自启动</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Linux启动时自动执行命令或脚本</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">方法 <span class="comment">#1 - 使用 cron 任务</span></span><br><span class="line"></span><br><span class="line">要求;</span><br><span class="line">1.cron 守护进程必须处于运行状态(通常情况下都会运行)</span><br><span class="line">2. 脚本或 crontab 文件必须包含需要的环境变量</span><br><span class="line"></span><br><span class="line">方法 <span class="comment">#2 - 使用 /etc/rc.d/rc.local</span></span><br><span class="line">要点：</span><br><span class="line">1.chmod +x /etc/rc.d/rc.local</span><br><span class="line">2.chmod +x /home/gacanepa/script2.sh</span><br><span class="line">3.在rc.local文件末尾添加需要执行的脚本命令 sh /home/gacanepa/script2.sh</span><br></pre></td></tr></table></figure><h2 id="Tips-大全"><a href="#Tips-大全" class="headerlink" title="Tips 大全"></a>Tips 大全</h2><ul><li><strong>env</strong> 查看当前环境变量</li><li><strong>history</strong> 查看输入的历史命令</li><li><strong>chmod</strong> 文件授权 需要一层层授权， 或者 chmod -R xxx 授权其下的所有文件以及文件夹</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">注意：不要拿Decimal和str进行比较，会导致结果完全错误。</span><br><span class="line">注意：字段的格式</span><br></pre></td></tr></table></figure><ul><li><strong>ctrl + w</strong> 回退输入的单词</li><li><strong>pstree</strong> 进程树</li><li><strong>time python xxxx</strong> sh 脚本中加 time 执行可以显示执行的时间详细情况</li><li><strong>nohup time xxx</strong> sh 文件中 使用 nohup 调度多个文件，可以多个文件同时执行，(文件之间不能存在依赖)</li></ul><p><strong>Linux 文件比对</strong><br>vimdiff a.txt b.txt # 效果 左右分割 颜色标记显示 (需要安装 vim 包)<br>diff -wy –suppress-common-lines a.txt b.txt # 效果 左右分割 推荐使用</p><p><strong>查看端口</strong><br>netstat -lntp | grep 5000</p><h3 id="Linux-命令去重"><a href="#Linux-命令去重" class="headerlink" title="Linux 命令去重"></a>Linux 命令去重</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">常用命令：sort -u xxx</span><br><span class="line"></span><br><span class="line">uniq <span class="comment"># 去重重复连续出现的记录</span></span><br><span class="line">sort -u 等价于 sort xxx | uniq</span><br><span class="line"></span><br><span class="line"><span class="comment"># 删除Linux文件重复行</span></span><br><span class="line">sort -n test.txt | uniq</span><br></pre></td></tr></table></figure><h3 id="删除用户数据"><a href="#删除用户数据" class="headerlink" title="删除用户数据"></a>删除用户数据</h3><p>userdel -r xxx # 完全删除用户<br>userdel xxx # 只能删除部分用户，像/home/xxx 等需要手动删除<br>Linux 去重</p><h3 id="Linux-查看当前占用-CPU-或内存最多的几个进程："><a href="#Linux-查看当前占用-CPU-或内存最多的几个进程：" class="headerlink" title="Linux 查看当前占用 CPU 或内存最多的几个进程："></a>Linux 查看当前占用 CPU 或内存最多的几个进程：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1. ps命令</span><br><span class="line">    1. ps -aux | sort -k4nr | head -10</span><br><span class="line">2. top工具</span><br><span class="line">    1. top之后，大写M，按照内存倒序排序</span><br><span class="line">    2. top之后，大写C，按照CPU倒序排序</span><br><span class="line">3. ps -aux | sort -k4,4n</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>切换用户运行 sh 脚本<br>su - fdm -c “Command”</p><h3 id="电源关机"><a href="#电源关机" class="headerlink" title="电源关机"></a>电源关机</h3><p>poweroff<br>reboot<br>shutdown</p><h3 id="Linux-登录或注销时执行脚本"><a href="#Linux-登录或注销时执行脚本" class="headerlink" title="Linux 登录或注销时执行脚本"></a>Linux 登录或注销时执行脚本</h3><p>分别使用~.bash_profile 和 ~.bash_logout 可以做到</p><h3 id="tailf、tail-f、tail-F-三者区别"><a href="#tailf、tail-f、tail-F-三者区别" class="headerlink" title="tailf、tail -f、tail -F 三者区别"></a>tailf、tail -f、tail -F 三者区别</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tail -f      等同于--follow=descriptor，根据文件描述符进行追踪，当文件改名或被删除，追踪停止</span><br><span class="line">tail -F     等同于--follow=name  --retry，根据文件名进行追踪，并保持重试，即该文件被删除或改名后，如果再次创建相同的文件名，会继续追踪</span><br><span class="line">tailf        等同于tail -f -n 10(貌似tail -f或-F默认也是打印最后10行，然后追踪文件)，与tail -f不同的是，如果文件不增长，它不会去访问磁盘文件，所以tailf特别适合那些便携机上跟踪日志文件，因为它减少了磁盘访问，可以省电</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="程序转入前台或者后台运行-Linux-ctrl-组合命令"><a href="#程序转入前台或者后台运行-Linux-ctrl-组合命令" class="headerlink" title="程序转入前台或者后台运行 Linux ctrl 组合命令"></a>程序转入前台或者后台运行 Linux ctrl 组合命令</h3><p>jobs //查看任务，返回任务编号 n 和进程号<br>free 查看当前内存使用情况<br>bg %n //将编号为 n 的任务转后台运行<br>fg %n //将编号为 n 的任务转前台运行<br>ctrl+z //挂起当前任务<br>ctrl+c //结束当前任务 发送 Terminal 到当前的程序，强制结束当前程序，比较暴力<br>ctrl+d //结束当前任务或退出 shell, 发送 exit 信号<br>ctrl+|<br>ctrl+s 暂停屏幕输出<br>ctrl+q 恢复屏幕输出<br>ctrl+a 切换到命令行开始<br>ctrl+e 切换到命令行末尾<br>ctrl+y 在光标处粘贴剪切的内容</p><h3 id="Linux-查看系统安转的所有源包"><a href="#Linux-查看系统安转的所有源包" class="headerlink" title="Linux 查看系统安转的所有源包"></a>Linux 查看系统安转的所有源包</h3><p>rpm -qa<br>pcp-pmda-kvm-3.10.6-2.el7.x86_64<br>unoconv-0.6-7.el7.noarch<br>texlive-fp-svn15878.0-38.el7.noarch<br>abrt-python-2.1.11-36.el7.centos.x86_64<br>libcanberra-gtk3-0.30-5.el7.x86_64</p><h3 id="Linux-查看-virtualenv-的所有包"><a href="#Linux-查看-virtualenv-的所有包" class="headerlink" title="Linux 查看 virtualenv 的所有包"></a>Linux 查看 virtualenv 的所有包</h3><p>pip freeze<br>效果如下：<br>tornado==4.3<br>Tornado-JSON==1.2.1<br>urlgrabber==3.10<br>urllib3==1.10.2<br>urwid==1.1.1</p><h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><p><strong>Linux-Tips 功能:</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看可安装包:</span></span><br><span class="line">rpm -qa | grep filename</span><br><span class="line">yum search filename</span><br><span class="line">pip search filename</span><br><span class="line"><span class="comment"># 2.动态查看日志，多方查看日志nohup</span></span><br><span class="line">tail -f nohup.out  -f</span><br><span class="line"><span class="comment"># 3.建立文件链接</span></span><br><span class="line">ln -s  xx/xxx/xxx/xx.py     test.link     建立软链接，相当于快捷方式</span><br><span class="line">ln -d  xx/xxx/xxx/xx.py     test.link     建立硬链接，相当于拷贝一份文件</span><br><span class="line"><span class="comment"># 4.wget命令</span></span><br><span class="line">wget命令下载某个文件的命令为：</span><br><span class="line">wget-P, –directory-prefix=PREFIX  [URL地址]，将url连接中的文件保存到目录 PREFIX/下。</span><br><span class="line"> 2.与目录相关的参数有：-nd –no-directories 不创建目录；</span><br><span class="line">    -x, –force-directories 强制创建目录；</span><br><span class="line">    -nH, –no-host-directories 不创建主机目录；</span><br><span class="line">    –cut-dirs=NUMBER 忽略 NUMBER层远程目录</span><br><span class="line"><span class="comment"># 6.虚拟机之间的文件传输</span></span><br><span class="line">第一种就是ftp，也就是其中一台Linux安装ftp Server，这样可以另外一台使用ftp的client程序来进行文件的copy。</span><br><span class="line"></span><br><span class="line">第二种方法就是采用samba服务，类似Windows文件copy 的方式来操作，比较简洁方便。</span><br><span class="line"></span><br><span class="line">第三种就是利用scp命令来进行文件复制。</span><br><span class="line"></span><br><span class="line">scp是有Security的文件copy，基于ssh登录。操作起来比较方便，比如要把当前一个文件copy到远程另外一台主机上，可以如下命令。</span><br><span class="line"></span><br><span class="line">scp /home/daisy/full.tar.gz root@172.19.2.75:/home/root</span><br><span class="line"></span><br><span class="line">然后会提示你输入另外那台172.19.2.75主机的root用户的登录密码，接着就开始copy了。</span><br><span class="line"></span><br><span class="line"><span class="comment"># 7.Linux 文件的处理 read，open，write等</span></span><br><span class="line"><span class="comment"># 8.Linux atime ctime mtime</span></span><br><span class="line">atime access time</span><br><span class="line">ctime change time</span><br><span class="line">mtime modify time</span><br><span class="line"></span><br><span class="line"><span class="comment"># 10.nosetests 单元测试</span></span><br><span class="line"></span><br><span class="line">用于测试某个程序中单独模块的功能</span><br><span class="line">nosetests -s xxx.py</span><br><span class="line">只会执行 函数名包含<span class="built_in">test</span>的函数</span><br><span class="line">ps：</span><br><span class="line">     可以吧其他函数放入test_all():中</span><br><span class="line"></span><br><span class="line"><span class="comment"># 11.获取每月的最大天数</span></span><br><span class="line">import datetime</span><br><span class="line">import calendar</span><br><span class="line">calendar.monthrange(now_year,now_month)[1]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 12.sqlalchemy.orm框架 - orm字段缺失，导致对应值缺失。</span></span><br><span class="line"></span><br><span class="line">当表中有10个字段。但是对应的orm只有8个字段，会导致 数据导入正常执行，但是缺失的两个字段无任何值。</span><br><span class="line">注:数据库修改，对应的orm必须修改一致</span><br><span class="line"></span><br><span class="line"><span class="comment"># 14.使用copy模块深拷贝对象</span></span><br><span class="line">浅拷贝，拷贝对应的引用，例如工厂函数，</span><br><span class="line">深拷贝，拷贝对象以及引用和引用指向的具体内容</span><br><span class="line"></span><br><span class="line"><span class="comment"># Decimal取两位小数，精度</span></span><br><span class="line">y = Decimal(0.2356).quantize(Decimal(<span class="string">&#x27;0.00&#x27;</span>))</span><br><span class="line">y = Deciaml(0.24)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看文件夹大小</span></span><br><span class="line">du -ah --max-depth=1</span><br></pre></td></tr></table></figure><h3 id="关机命令"><a href="#关机命令" class="headerlink" title="关机命令"></a>关机命令</h3><p>linux 下常用的关机命令有：shutdown、halt、poweroff、init；重启命令有：reboot。下面本文就主要介绍一些常用的关机命令以及各种关机命令之间的区别和具体用法。</p><p>首先来看一下 linux 下比较常用的一些关机命令</p><p>关机命令：</p><ul><li>halt 立刻关机</li><li>poweroff 立刻关机</li><li>shutdown -h now 立刻关机(root 用户使用)</li><li>shutdown -h 10 10 分钟后自动关机 如果是通过 shutdown 命令设置关机的话，可以用 shutdown -c 命令取消重启</li></ul><p>重启命令：</p><ul><li>reboot</li><li>shutdown -r now 立刻重启(root 用户使用)</li><li>shutdown -r 10 过 10 分钟自动重启(root 用户使用)</li><li>shutdown -r 20:35 在时间为 20:35 时候重启(root 用户使用) 如果是通过 shutdown 命令设置重启的话，可以用 shutdown -c 命令取消重启</li></ul><p>在 linux 下一些常用的关机/重启命令有 shutdown、halt、reboot、及 init，它们都可以达到重启系统的目的，但每个命令的内部工作过程是不同的。</p><p>如果是通过 shutdown 命令设置重启或关机的话，可以用 shutdown -c 命令取消重启</p><p>几种不同关机命令详解</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">1.shutdown 安全地将系统关机</span><br><span class="line"></span><br><span class="line">shutdown 命令安全地将系统关机。 有些用户会使用直接断掉电源的方式来关闭 linux，这是十分危险的。因为 linux 与 windows 不同，其后台运行着许多进程，所以强制关机可能会导致进程的数据丢失﹐使系统处于不稳定的状态﹐甚至在有的系统中会损坏硬件设备。</span><br><span class="line"></span><br><span class="line">而在系统关机前使用 shutdown 命令﹐系统管理员会通知所有登录的用户系统将要关闭。并且 login 指令会被冻结﹐即新的用户不能再登录。直接关机或者延迟一定的时间才关机都是可能的﹐还可能重启。这是由所有进程〔process〕都会收到系统所送达的信号〔signal〕决定的。这让像 vi 之类的程序有时间储存目前正在编辑的文档﹐而像处理邮件〔mail〕和新闻〔news〕的程序则可以正常地离开等等。</span><br><span class="line"></span><br><span class="line">shutdown 执行它的工作是送信号〔signal〕给 init 程序﹐要求它改变 runlevel。Runlevel 0 被用来停机〔halt〕﹐runlevel 6 是用来重新激活〔reboot〕系统﹐而 runlevel 1 则是被用来让系统进入管理工作可以进行的状态﹔这是预设的﹐假定没有-h 也没有-r 参数给 shutdown。要想了解在停机〔halt〕或者重新开机〔reboot〕过程中做了哪些动作﹐你可以在这个文件/etc/inittab 里看到这些 runlevels 相关的资料。</span><br><span class="line"></span><br><span class="line">shutdown 参数说明:</span><br><span class="line">　　 [-t] 在改变到其它 runlevel 之前﹐告诉 init 多久以后关机。</span><br><span class="line">　　 [-r] 重启计算器。</span><br><span class="line">　　 [-k] 并不真正关机﹐只是送警告信号给每位登录者〔login〕。</span><br><span class="line">　　 [-h] 关机后关闭电源〔halt〕。</span><br><span class="line">　　 [-n] 不用 init﹐而是自己来关机。不鼓励使用这个选项﹐而且该选项所产生的后果往往不总是你所预期得到的。</span><br><span class="line">　　 [-c] cancel current process 取消目前正在执行的关机程序。所以这个选项当然没有时间参数﹐但是可以输入一个用来解释的讯息﹐而这信息将会送到每位使用者。</span><br><span class="line">　　 [-f] 在重启计算器〔reboot〕时忽略 fsck。</span><br><span class="line">[-F] 在重启计算器〔reboot〕时强迫 fsck。</span><br><span class="line">　　 [-time] 设定关机〔shutdown〕前的时间。</span><br><span class="line"></span><br><span class="line">2.halt 调用 shutdown -h, 文件系统写操作完成后就会停止内核</span><br><span class="line"></span><br><span class="line">其实 halt 就是调用 shutdown -h。halt 执行时﹐杀死应用进程﹐执行 sync 系统调用﹐文件系统写操作完成后就会停止内核。</span><br><span class="line">　　 参数说明:</span><br><span class="line">　　 [-n] 防止 sync 系统调用﹐它用在用 fsck 修补根分区之后﹐以阻止内核用老版本的超级块〔superblock〕覆盖修补过的超级块。</span><br><span class="line">　　 [-w] 并不是真正的重启或关机﹐只是写 wtmp〔/var/<span class="built_in">log</span>/wtmp〕纪录。</span><br><span class="line">　　 [-d] 不写 wtmp 纪录〔已包含在选项[-n]中〕。</span><br><span class="line">　　 [-f] 没有调用 shutdown 而强制关机或重启。</span><br><span class="line">　　 [-i] 关机〔或重启〕前﹐关掉所有的网络接口。</span><br><span class="line">　　 [-p] 该选项为缺省选项。就是关机时调用 poweroff。</span><br><span class="line"></span><br><span class="line">3.reboot 引发主机重启</span><br><span class="line">　　 reboot 的工作过程差不多跟 halt 一样﹐不过它是引发主机重启﹐而 halt 是关机。它的参数与 halt 相差不多。</span><br><span class="line"></span><br><span class="line">4.init 终止所有的用户进程﹑守护进程等</span><br><span class="line">　　 init 是所有进程的祖先﹐它的进程号始终为 1﹐所以发送 TERM 信号给 init 会终止所有的用户进程﹑守护进程等。shutdown 就是使用这种机制。init 定义了 8 个运行级别(runlevel)， init 0 为关机﹐init 1 为重启。关于 init 可以长篇大论﹐这里就不再叙述。另外还有 telinit 命令可以改变 init 的运行级别﹐比如﹐telinit -iS 可使系统进入单用户模式﹐并且得不到使用 shutdown 时的信息和等待时间。</span><br></pre></td></tr></table></figure><h2 id="TODO-其他命令"><a href="#TODO-其他命令" class="headerlink" title="TODO 其他命令"></a>TODO 其他命令</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ps -ef 查看进程异常否，是否存在攻击。</span><br><span class="line">js查看数据类型  alert(typeof xxx)</span><br><span class="line"><span class="built_in">test</span> -e filenaem 判断文件名是否存在。</span><br><span class="line">vi中 ctrl按键配合方向键 有奇效---对于调到句首 句尾</span><br><span class="line">grep -rn <span class="string">&quot;xxx&quot;</span> .  当前路径中搜索，公司电脑也可使用</span><br><span class="line"></span><br><span class="line">crtl+p/n  vi中的命令补全</span><br><span class="line">grep精准查找 grep -w <span class="string">&quot;xxx&quot;</span> 或者 grep <span class="string">&quot;\&lt;xxx\&gt;&quot;</span></span><br><span class="line">vi中查看文件名，文件路径:file  :<span class="built_in">pwd</span>  :ls<span class="comment">#历史打开的文件</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="http://fansichao.github.com/blog/Languages/Linux/linux-using-cmd.md/" title="【*】Linux-常用命令大全" target="_blank" rel="external">http://fansichao.github.com/blog/Languages/Linux/linux-using-cmd.md/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="https://github.com/fansichao" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/blog/images/avatar.jpg" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="https://github.com/fansichao" target="_blank"><span class="text-dark">fansichao</span><small class="ml-1x">Data Engineer &amp; SSE &amp; CYO</small></a></h3><div>个人简介。</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/blog/Languages/Python/README.md/" title="Readme-Python"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/blog/Languages/Linux/linux-virtualenvwarapper.md/" title="Virtualenvwrapper"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li></ul><button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>$</span></button><div class="bar-right"><div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div></div></div></nav><div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content donate"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><div class="modal-body"><div class="donate-box"><div class="donate-head"><p>Maybe you could buy me a cup of coffee.</p></div><div class="tab-content"><div role="tabpanel" class="tab-pane fade active in" id="alipay"><div class="donate-payimg"><img src="/blog/images/donate/alipayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open alipay app scan this qrcode, buy me a coffee!</p></div><div role="tabpanel" class="tab-pane fade" id="wechatpay"><div class="donate-payimg"><img src="/blog/images/donate/wechatpayimg.png" alt="Scan Qrcode" title="Scan"></div><p class="text-muted mv">Scan this qrcode</p><p class="text-grey">Open wechat app scan this qrcode, buy me a coffee!</p></div></div><div class="donate-footer"><ul class="nav nav-tabs nav-justified" role="tablist"><li role="presentation" class="active"><a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> alipay</a></li><li role="presentation"><a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> wechat payment</a></li></ul></div></div></div></div></div></div></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/cofess" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="http://weibo.com/cofess" target="_blank" title="Weibo" data-toggle="tooltip" data-placement="top"><i class="icon icon-weibo"></i></a></li><li><a href="https://twitter.com/iwebued" target="_blank" title="Twitter" data-toggle="tooltip" data-placement="top"><i class="icon icon-twitter"></i></a></li><li><a href="https://www.behance.net/cofess" target="_blank" title="Behance" data-toggle="tooltip" data-placement="top"><i class="icon icon-behance"></i></a></li><li><a href="/blog/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright"><div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/blog/js/plugin.min.js"></script><script src="/blog/js/application.js"></script><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Posts",PAGES:"Pages",CATEGORIES:"Categories",TAGS:"Tags",UNTITLED:"(Untitled)"},ROOT_URL:"/blog/",CONTENT_URL:"/blog/content.json"}</script><script src="/blog/js/insight.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"",appKey:"",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script><script src="//cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.3.5/dist/jquery.fancybox.min.js"></script><script>$(document).ready(function(){$("article img").not("[hidden]").not(".panel-body img").each(function(){var a,t,n=$(this),e=n.attr("alt"),r=n.parent("a");r.length<1&&(-1!=(t=(a=this.getAttribute("src")).lastIndexOf("?"))&&(a=a.substring(0,t)),r=n.wrap('<a href="'+a+'"></a>').parent("a")),r.attr("data-fancybox","images"),e&&r.attr("data-caption",e)}),$().fancybox({selector:'[data-fancybox="images"]',hash:!1,loop:!1})})</script></body></html>